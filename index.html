<!DOCTYPE html>
<html lang="en">
<!-- Head section includes the top level meta information as well as the page title -->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Savings Planner</title>
  <link rel="stylesheet" href="./index.css">
  <script src="./index.js" defer></script>
</head>
<!-- Body section defines what is rendered for the user -->
<body>
  <div class="container">
    <h1>Savings Planner</h1>
    <p class="subheading">
      Add your financial goals below
    </p>
    
    <form id ="goalPlanner">
      <label for="goal1">First goal ($):</label><br>
      <input type="number" id="g1" name="g1" oninput="updateResult()"><br>
      <label for="goal2">Second goal ($):</label><br>
      <input type="number" id="g2" name="g2" oninput="updateResult()">
      <label for="monthly">Monthly Savings ($/mo):</label><br>
      <input type="number" id="savings" name="savings" oninput="updateResult()">
      <label for="range">Priority (0 is prioritize goal 1)</label>
      <input type="range" min="0" max="100" value="0" class="slider" id="priority" oninput="updateResult()">
      
    </form>

    <p>Months to achieve goal 1: <output id = "result1" name="result1"></output></p>
    <p>Months to achieve goal 2: <output id = "result2" name="result2"></output></p>

    <script>
      const form = document.getElementById("goalPlanner");
      const g1 = form.elements["g1"];
      const g2 = form.elements["g2"];
      const monthly = form.elements["savings"];
      const priority = form.elements["priority"];
      
      const result = form.elements["result1"];

      function updateResult() {
        const g1Value = parseInt(g1.value);
        const g2Value = parseInt(g2.value);
        const monthlyValue = parseInt(monthly.value);
        const priorityValue = parseInt(priority.value);
        //result.value = g1Value / (monthlyValue * (priorityValue / 100));

        var r1 = 0;
        var r2 = 0;
        if (priorityValue == 0){
          r1 = g1Value / monthlyValue;
          r2 = r1 + (g2Value / monthlyValue);
        } else if (priorityValue == 100){
          r2 = g2Value / monthlyValue;
          r1 = r2 + (g1Value / monthlyValue);
        } else {
          r1 = g1Value / (monthlyValue * (1 - (priorityValue / 100)));
          r2 = g2Value / (monthlyValue * (priorityValue / 100));
        }

        document.getElementById("result1").value = r1;
        document.getElementById("result2").value = r2;
      }

      //form.addEventListener("input", updateResult);

      //updateResult();

      //const firstForm = document.forms[0];
      //console.log(firstForm);
    </script>
    
    <!--
    <div class="square" id="circleID"></div>
    <div class="action">
      <button onclick="paint('red')">Red</button>
      <button onclick="paint('green')">Green</button>
      <button onclick="paint('yellow')">Yellow</button>
    </div>
    -->
  </div>
</body>
</html>
